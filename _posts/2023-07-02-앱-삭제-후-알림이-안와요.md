```
title: ì•± ì‚­ì œ í›„ ì•Œë¦¼ì´ ì•ˆì™€ìš”
author: dongee_seo
date: 2023-07-02
categories: [Zippu, React-Native]
tags: [google analytics, react native, side project]
```

### FCM??
ë¨¼ì € í‘¸ì‹œ ì•Œë¦¼ì„ ë³´ë‚´ê¸° ìœ„í•´ì„œëŠ” íŒŒì´ì–´ë² ì´ìŠ¤ì— ëŒ€í•œ ì´í•´ê°€ í•„ìš”í•˜ë¯€ë¡œ, íŒŒì´ì–´ë² ì´ìŠ¤ì˜ ê³µì‹ë¬¸ì„œë¥¼ ì°¨ê·¼ì°¨ê·¼ ì •ë¦¬í•´ ë³´ì•˜ë‹¤.

![](https://velog.velcdn.com/images/seod0209/post/63aab086-d070-426a-bdce-3c5ca44b13d5/image.png)

### FCM ì•„í‚¤í…ì²˜?
Firebase í´ë¼ìš°ìŠ¤ ë©”ì‹œì§•(FCM)ì€ ë¬´ë£Œë¡œ ë©”ì‹œì§€ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” êµì°¨ í”Œë«í¼ ë©”ì‹œì§• ì†”ë£¨ì…˜ì´ë‹¤. FCMì€ ì•„ë˜ì²˜ëŸ¼ í™œìš©í•œë‹¤ë©´, ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.
Â 
ìì²´ ì•± ì„œë²„ë¥¼ êµ¬í˜„í•˜ê±°ë‚˜, ë˜ëŠ” Firebaseìš© Cloud Functionsì„ í™œìš©í•´ì„œ FCM ë°±ì—”ë“œë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ë‹¤ëŠ” ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
-> FCM ë°±ì—”ë“œëŠ” ë©”ì‹œì§€ ìš”ì²­ì„ ë°›ì•„ì„œ topicì„ í†µí•´ ë©”ì‹œì§€ë¥¼ í™•ì¥í•˜ê³ , 
ë©”ì‹œì§€ IDì™€ ê°™ì€ ë©”ì‹œì§€ ë©”íƒ€ë°ì´í„°ë¥¼ ìƒì„±í•œë‹¤.
-> ê¸°ê¸°ë¡œ íƒ€ê²ŸíŒ…ëœ ë©”ì‹œì§€ë¥¼ ë¼ìš°íŒ… í•˜ê³ , ë©”ì‹œì§€ ì „ì†¡ì„ ì²˜ë¦¬í•˜ê³ , í•„ìš”í•œ ê²½ìš° í”Œë«í¼ë³„ êµ¬ì„±ì„ ì ìš©í•˜ëŠ” í”Œë«í¼ ìˆ˜ì¤€ì˜ ì „ì†¡ ë ˆì´ì–´ì´ë‹¤.

- ì•Œë¦¼ì´ í‘œì‹œë˜ê±°ë‚˜ ì•±ì˜ í¬ê·¸ë¼ìš´ë“œ/ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœ ë° ê´€ë ¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì— ë”°ë¼ ë©”ì‹œì§€ê°€ ì²˜ë¦¬ë˜ëŠ” ì‚¬ìš©ì ê¸°ê¸°ì˜ FCM SDKì´ë‹¤.

FCMì—ì„œ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ë„ë¡ ê¸°ê¸°ë¥¼ ë“±ë¡í•´ì•¼ í•˜ë©°, í´ë¼ì´ì–¸íŠ¸ ì•±ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ë„ë¡ ë“±ë¡í•˜ì—¬ ì•± ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ” ë“±ë¡ í† í°ì„ ë°›ëŠ”ë‹¤.Â 

# Problem

Zippu í”„ë¡œì íŠ¸ì—ì„œ í‘¸ì‹œ ì•Œë¦¼ì„ í™œìš©í•œ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ë˜ ë„ì¤‘ í…ŒìŠ¤íŠ¸ ì•±ì„ ì‚­ì œ í•œ ë’¤, ê¸°ì¡´ì— ì˜ ì˜¤ë˜ ì•Œë¦¼ì´ ì˜¤ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤.

### FCM ë“±ë¡ í† í° ê´€ë¦¬
 í‘¸ì‹œ ì•Œë¦¼ì„ ë³´ë‚´ê¸° ìœ„í•´ì„œëŠ” ì‚¬ìš©ìì˜ FCM í† í°ì„ ì„œë²„ì—ì„œ ì˜ ê´€ë¦¬í•´ì•¼ í•œë‹¤. ë§Œì•½ ì˜¤ë˜ëœ ë“±ë¡ í† í°ì´ ìˆëŠ” ë¹„í™œì„± ì¥ì¹˜ì— ë©”ì‹œì§€ë¥¼ ì „ì†¡í•œë‹¤ë©´, ì œëŒ€ë¡œ í‘¸ì‹œê°€ ì „ë‹¬ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.Â 
Â 
FCM APIë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì•±ì—ì„œ ë”°ë¼ì•¼ í•˜ëŠ” ëª‡ ê°€ì§€ ê¸°ë³¸ ê·œì¹™ì´ ìˆë‹¤.Â 
Â 
- ì„œë²„ì— ë“±ë¡ í† í°ì„ ì €ì¥í•œë‹¤.
	ì„œë²„ì˜ ì¤‘ìš”í•œ ì—­í• ì€ ê° í´ë¼ì´ì–¸íŠ¸ì˜ í† í°ì„ ì¶”ì í•˜ê³  í™œì„± í† í°ì˜ ì—…ë°ì´íŠ¸ëœ ëª©ë¡ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ë‹¤. ì½”ë“œì™€ ì„œë²„ì— í† í° íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ êµ¬í˜„í•˜ê³  ì´ íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ì •ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- ì˜¤ë˜ëœ í† í°ì„ ì œê±°í•œë‹¤.
	ì˜ëª»ëœ í† í° ì‘ë‹µì˜ ëª…ë°±í•œ ê²½ìš°ì— í† í°ì„ ì œê±°í•˜ëŠ” ê²ƒ ì™¸ì—ë„ í† í°ì´ ì˜¤ë˜ë˜ì—ˆë‹¤ëŠ” ë‹¤ë¥¸ ì§•í›„ë¥¼ ëª¨ë‹ˆí„°ë§í•´ì•¼ í•  ìˆ˜ë„ ìˆë‹¤. 


### ğŸ‘‰ ë‚´ê°€ ë†“ì¹œ ë¶€ë¶„: ë“±ë¡ í† í° ê²€ìƒ‰ ë° ì €ì¥ 
ì•±ì„ ì²˜ìŒ ì‹œì‘í•  ë•Œ FCM SDKëŠ” í´ë¼ì´ì–¸íŠ¸ ì•± ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ë“±ë¡ í† í°ì„ ìƒì„±í•œë‹¤. ì´ëŠ” APIì˜ ëŒ€ìƒ ì§€ì • ì „ì†¡ ìš”ì²­ì— í¬í•¨í•˜ê±°ë‚˜ ëŒ€ìƒ ì§€ì • Topicì— ëŒ€í•œ Topic êµ¬ë…ì— ì¶”ê°€í•´ì•¼ í•˜ëŠ” í† í°ì´ë‹¤. **ì•±ì€ ì´ˆê¸° ì‹œì‘ ì‹œ ì´ í† í°ì„ ê²€ìƒ‰í•˜ê³  íƒ€ì„ìŠ¤íƒ¬í”„ì™€ í•¨ê»˜** ì•± ì„œë²„ì— ì €ì¥í•´ì•¼ í•œë‹¤. ì´ íƒ€ì„ìŠ¤íƒ¬í”„ëŠ” FCM SDKì—ì„œ ì œê³µí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì½”ë“œì™€ ì„œë²„ì—ì„œ êµ¬í˜„í•´ì•¼ í•œë‹¤.

ë˜í•œ ë‹¤ìŒê³¼ ê°™ì´ í† í°ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í† í°ì„ ì„œë²„ì— ì €ì¥í•˜ê³  íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.
Â 

- ì•±ì´ ìƒˆ ê¸°ê¸°ì—ì„œ ë³µì›.
- ì‚¬ìš©ìê°€ ì•±ì„ ì œê±°/ì¬ì„¤ì¹˜.
- ì‚¬ìš©ìê°€ ì•± ë°ì´í„°ë¥¼ ì§€ì›€.

Â 
ìœ„ì˜ ê²½ìš°ì²˜ëŸ¼ í† í°ì´ ë³€ê²½ëë‹¤ë©´, ê¸°ì¡´ í† í°ì€ ë§Œë£Œë˜ì–´ ë²„ë¦°ë‹¤. ë§Œë£Œëœ í† í°ìœ¼ë¡œ í‘¸ì‹œ ì•Œë¦¼ì„ ë³´ë‚´ë ¤ í•œë‹¤ë©´, FCM ë°±ì—”ë“œì—ì„œëŠ” ì˜ëª»ëœ í† í°ì— ëŒ€í•œ ì‘ë‹µì„ ê°ì§€í•˜ê³  í† í°ì´ ì˜ëª»ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ì‘ë‹µìœ¼ë¡œ ì „ë‹¬í•œë‹¤.

# Improvement
### ì •ê¸°ì ìœ¼ë¡œ í† í° ì—…ë°ì´íŠ¸

1. ì•± ì§„ì…ì‹œ Apple í”Œë«í¼ì˜ ê²½ìš°Â token(completion):Â Androidì˜ ê²½ìš°Â getToken()ì„ ì‚¬ìš©í•˜ì—¬ í˜„ì¬ í† í°ì„ ê²€ìƒ‰í•œ ë‹¤ìŒ ì €ì¥ì„ ìœ„í•´ í˜„ì¬ í† í°ì„ ì•± ì„œë²„ì— ë³´ë‚´ê³  ë¡œì»¬ì—ë„ ì €ì¥í•œë‹¤. => íƒ€ì„ìŠ¤íƒ¬í”„ ë¯¸í¬í•¨

ì´ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì—¬ ì„œë²„ì— ë³´ë‚¼ ë•Œ íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨ì‹œì¼°ë‹¤.
( ì„œë²„ì¸¡ì—ì„œ í† í° ë³€ê²½ ì—¬ë¶€ì— ê´€ê³„ì—†ì´ ì •ê¸°ì ìœ¼ë¡œ í† í°ì˜ íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ì—…ë°ì´íŠ¸í•˜ì—¬, í† í°ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ë©´ íš¨ìœ¨ì ì¸ í† í° ê´€ë¦¬í•˜ê¸° ìœ„í•¨)

2. ì•±ì— ì§„ì…ì‹œ ë¡œì»¬ì— ì €ì¥ëœ í† í°ì´ ìˆë‹¤ë©´ í•´ë‹¹ í† í°ì„ ì‚¬ìš©í•˜ê³  ì•„ë‹ˆë¼ë©´ í˜„ì¬ í† í°ì„ ê²€ìƒ‰í•œ ë‹¤ìŒ ì„œë²„ì— ë³´ë‚´ ì €ì¥í•œë‹¤.
- í•˜.. ë¡œì»¬ì— ì €ì¥í•´ì„œ ì¬ì‚¬ìš©í•œ ì´ë¶€ë¶„ì´ ì•„ì£¼ ë‹¨ë‹¨íˆ ì°©ê°í•œ ë¶€ë¶„ì´ì—ˆë‹¤. ë”°ë¼ì„œ í•´ë‹¹ ë¶€ë¶„ì„ ì œê±°í•˜ê³  ì•± ì§„ì…ì‹œë§ˆë‹¤  í˜„ì¬ í† í°(ì´ëŠ” ì•ì„œ ì„¤ëª…í•œê²ƒ ì²˜ëŸ¼ íŠ¹ì • ìƒí™©ì—ì„œ ë³€í•œë‹¤)ì„ ê²€ìƒ‰í•˜ì—¬ ì—…ë°ì´íŠ¸ í•´ì£¼ì—ˆë‹¤. 

Â 
Â 
Â > ì°¸ê³  ìë£Œ
- https://firebase.google.com/docs/cloud-messaging/fcm-architecture?hl=ko